"use strict";(self.webpackChunkiota_wiki=self.webpackChunkiota_wiki||[]).push([[456],{9678:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return c},default:function(){return p}});var o=r(3117),n=r(102),i=(r(7294),r(3905)),a=["components"],s={title:"How to automatically reassign roles to rejoining users",description:"This guide explains how to automatically reassign roles when users rejoin your Discord server."},l="How to auto-reassign roles when users rejoin your Discord server",u={unversionedId:"features-applied/how-to-auto-reassign-roles-to-rejoining-discord-users",id:"features-applied/how-to-auto-reassign-roles-to-rejoining-discord-users",title:"How to automatically reassign roles to rejoining users",description:"This guide explains how to automatically reassign roles when users rejoin your Discord server.",source:"@site/internal/guides/features-applied/how-to-auto-reassign-roles-to-rejoining-discord-users.md",sourceDirName:"features-applied",slug:"/features-applied/how-to-auto-reassign-roles-to-rejoining-discord-users",permalink:"/comfyai_docs_build/guides/features-applied/how-to-auto-reassign-roles-to-rejoining-discord-users",editUrl:"test/internal/guides/features-applied/how-to-auto-reassign-roles-to-rejoining-discord-users.md",tags:[],version:"current",lastUpdatedAt:1642467325,formattedLastUpdatedAt:"1/17/2022",frontMatter:{title:"How to automatically reassign roles to rejoining users",description:"This guide explains how to automatically reassign roles when users rejoin your Discord server."},sidebar:"build",previous:{title:"Sharing Data",permalink:"/comfyai_docs_build/guides/getting-started/sharing-data"}},c=[{value:"Automatically reassigning roles with ComfyAI",id:"automatically-reassigning-roles-with-comfyai",children:[],level:3},{value:"Additional Info",id:"additional-info",children:[],level:3}],d={toc:c};function p(e){var t=e.components,s=(0,n.Z)(e,a);return(0,i.kt)("wrapper",(0,o.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"how-to-auto-reassign-roles-when-users-rejoin-your-discord-server"},"How to auto-reassign roles when users rejoin your Discord server"),(0,i.kt)("p",null,"It\u2019s common to use roles on Discord to denote a user\u2019s privileges as well as punishments."),(0,i.kt)("p",null,"Sometimes a user\u2019s actions do not warrant full ban or kick, but the user needs to be seriously warned and appeal their behavior. In this case it\u2019s useful to give a user a banned or quarantined role which removes them from the normal channel list, and places them into either a ticket channel, or a channel with all the other quarantined users."),(0,i.kt)("p",null,"There\u2019s one major problem with this though! When a user leaves and rejoins your server, all of their roles are stripped!"),(0,i.kt)("p",null,"So how do we stop users losing their roles when they leave your server? Annoyingly, Discord does not have this feature built in, nor is it possible to do with most popular bots. Thankfully though, ComfyAI includes this as a core feature, and it\u2019s really simple to get working on your server."),(0,i.kt)("h3",{id:"automatically-reassigning-roles-with-comfyai"},"Automatically reassigning roles with ComfyAI"),(0,i.kt)("p",null,"The first thing you need to do is invite ComfyAI to your server and assign it the proper roles and permissions. You can read Comfy\u2019s ",(0,i.kt)("a",{parentName:"p",href:"/guides/getting-started/inviting-the-bot"},"Getting Started")," guide on how to do that (it only takes about 60 seconds). "),(0,i.kt)("p",null,"Next you can utilize Comfy\u2019s command automation framework to automatically run the \u201crestore user\u201d action each time a user rejoins your server. Let\u2019s take a look at that command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"/when join state=\u201drejoin\u201d \u2192 restore\n")),(0,i.kt)("p",null,"Here's how that command will look as you're typing it into Discord:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Demo of typing the command",src:r(874).Z})),(0,i.kt)("p",null,'This is a Discord \u201cApplication Command\u201d also known as a "Slash Command", which means you simply type it into your chat window inside the server where ComfyAI has been added. Discord will take care of registering the command into Comfy. If everything went okay you\u2019ll see this text in chat:'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Demo of the command result",src:r(6211).Z})),(0,i.kt)("p",null,"Now that's setup, every time a user that rejoins your server after having already been in it, they will automatically be reassigned the roles and nickname they had upon leaving!"),(0,i.kt)("h3",{id:"additional-info"},"Additional Info"),(0,i.kt)("p",null,"An \u201cEvent Listener\u201d is a special high performance function that runs inside ComfyAI\u2019s servers. Each time any event happens on your server like: a message being sent, a user joining, roles being updated, emoji reactions, etc, a small snippet of information is sent by Discord to Comfy over what is called a \u201cGateway\u201d. ComfyAI scans this data and checks if it matches any automations server owners have created. If a match is found the corresponding action is performed."))}p.isMDXComponent=!0},3905:function(e,t,r){r.d(t,{Zo:function(){return c},kt:function(){return h}});var o=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=o.createContext({}),u=function(e){var t=o.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},c=function(e){var t=u(e.components);return o.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(r),h=n,m=p["".concat(l,".").concat(h)]||p[h]||d[h]||i;return r?o.createElement(m,a(a({ref:t},c),{},{components:r})):o.createElement(m,a({ref:t},c))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,a=new Array(i);a[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,a[1]=s;for(var u=2;u<i;u++)a[u]=r[u];return o.createElement.apply(null,a)}return o.createElement.apply(null,r)}p.displayName="MDXCreateElement"},6211:function(e,t,r){t.Z=r.p+"assets/images/Screenshot_20220112_133714-e841b8110a7c439b695ec607dedd4be3.png"},874:function(e,t,r){t.Z=r.p+"assets/images/Screenshot_20220112_135640-0e2e105ea98dc4a9e967762924ce6896.png"}}]);