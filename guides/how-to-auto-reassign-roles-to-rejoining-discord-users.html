<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/comfyai_docs_build/blog/rss.xml" title="ComfyAI Portal RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/comfyai_docs_build/blog/atom.xml" title="ComfyAI Portal Atom Feed">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons"><title data-react-helmet="true">How to automatically reassign roles to rejoining users | ComfyAI Portal</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://cybermancy.org/comfyai_docs_build/guides/how-to-auto-reassign-roles-to-rejoining-discord-users"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-guides-current"><meta data-react-helmet="true" property="og:title" content="How to automatically reassign roles to rejoining users | ComfyAI Portal"><meta data-react-helmet="true" name="description" content="This guide explains how to automatically reassign roles when users rejoin your Discord server."><meta data-react-helmet="true" property="og:description" content="This guide explains how to automatically reassign roles when users rejoin your Discord server."><link data-react-helmet="true" rel="icon" href="/comfyai_docs_build/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://cybermancy.org/comfyai_docs_build/guides/how-to-auto-reassign-roles-to-rejoining-discord-users"><link data-react-helmet="true" rel="alternate" href="https://cybermancy.org/comfyai_docs_build/guides/how-to-auto-reassign-roles-to-rejoining-discord-users" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://cybermancy.org/comfyai_docs_build/guides/how-to-auto-reassign-roles-to-rejoining-discord-users" hreflang="x-default"><link rel="stylesheet" href="/comfyai_docs_build/assets/css/styles.bd4313d9.css">
<link rel="preload" href="/comfyai_docs_build/assets/js/runtime~main.93cd3a35.js" as="script">
<link rel="preload" href="/comfyai_docs_build/assets/js/main.0c946e6e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_1VR7"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/comfyai_docs_build/"><div class="navbar__logo"><img src="/comfyai_docs_build/img/logo.png" alt="ComfyAI Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/comfyai_docs_build/img/logo.png" alt="ComfyAI Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div></a><a class="navbar__item navbar__link" href="/comfyai_docs_build/guides/welcome"><div class="link"><div class="link__body"><div class="link__label">Get Started</div></div></div></a><div class="dropdown dropdown--hoverable dropdown--mega"><a href="#" class="navbar__item navbar__link"><div class="link"><div class="link__body"><div class="link__label">Commands</div></div></div></a><div class="dropdown__container"><div class="dropdown__menu"><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Built-in Commands</div></div><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Custom Commands</div></div><div class="col margin-horiz--xs dropdown__col"><div class="dropdown__label">Data API</div></div><div class="col margin-horiz--xs dropdown__col"></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/comfyai_docs_build/guides/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Basic Commands</div><div class="link__sublabel">Basic moderation</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/comfyai_docs_build/chrysalis-docs/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Creating basic-commands</div><div class="link__sublabel">Create reusable actions</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/comfyai_docs_build/chrysalis-docs/welcome"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">RESTful Discord API</div><div class="link__sublabel">Proxy discord to web</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/comfyai_docs_build/guides/automations"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Automations</div><div class="link__sublabel">Respond to events</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"><a class="dropdown__link" href="/comfyai_docs_build/guides/imports_exports"><div class="link"><div class="link__icon"></div><div class="link__body"><div class="link__label">Imports/exports</div><div class="link__sublabel">Move between servers</div></div></div></a></div><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div></div><div class="row row--no-gutters dropdown__row"><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div><div class="col margin-horiz--xs dropdown__col"></div></div></div></div></div><a class="navbar__item navbar__link" href="/comfyai_docs_build/guides/welcome"><div class="link"><div class="link__body"><div class="link__label">Guides</div></div></div></a><a href="#" class="navbar__item navbar__link"><div class="link"><div class="link__body"><div class="link__label">Tuning</div></div></div></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/comfyai_docs_build/pages/donate"><div class="link"><div class="link__body"><div class="link__label">Donate</div></div></div></a><a class="navbar__item navbar__link" href="/comfyai_docs_build/releases/releases"><div class="link"><div class="link__body"><div class="link__label">Releases</div></div></div></a><div class="navbar__item navbar__item--dock"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/comfyai_docs_build/"><img src="/comfyai_docs_build/img/logo.png" alt="ComfyAI Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/comfyai_docs_build/img/logo.png" alt="ComfyAI Logo" class="themedImage_1VuW themedImage--dark_hz6m"></a><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/comfyai_docs_build/guides/welcome">Welcome to Guides</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/comfyai_docs_build/guides/how-to-auto-reassign-roles-to-rejoining-discord-users">How to automatically reassign roles to rejoining users</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How to auto-reassign roles when users rejoin your Discord server</h1></header><p>It’s common to use roles on Discord to denote a user’s privileges as well as punishments.</p><p>Sometimes a user’s actions do not warrant full ban or kick, but the user needs to be seriously warned and appeal their behavior. In this case it’s useful to give a user a banned or quarantined role which removes them from the normal channel list, and places them into either a ticket channel, or a channel with all the other quarantined users.</p><p>There’s one major problem with this though! When a user leaves and rejoins your server, all of their roles are stripped!</p><p>So how do we stop users losing their roles when they leave your server? Annoyingly, Discord does not have this feature built in, nor is it possible to do with most popular bots. Thankfully though, ComfyAI includes this as a core feature, and it’s really simple to get working on your server.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="automatically-reassigning-roles-with-comfyai">Automatically reassigning roles with ComfyAI<a class="hash-link" href="#automatically-reassigning-roles-with-comfyai" title="Direct link to heading">​</a></h3><p>The first thing you need to do is invite ComfyAI to your server and assign it the proper roles and permissions. You can read Comfy’s Getting Started guide on how to do that (it only takes about 60 seconds). </p><p>Next you can utilize Comfy’s command automation framework to automatically run the “restore user” action each time a user rejoins your server. Let’s take a look at that command:</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/when join state=”rejoin” → restore</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Here&#x27;s how that command will look as you&#x27;re typing it into Discord:</p><p><img alt="Demo of typing the command" src="/comfyai_docs_build/assets/images/Screenshot_20220112_135640-0e2e105ea98dc4a9e967762924ce6896.png" class="fullscreen-image__source"></p><p>This is a Discord “Application Command” also known as a &quot;Slash Command&quot;, which means you simply type it into your chat window inside the server where ComfyAI has been added. Discord will take care of registering the command into Comfy. If everything went okay you’ll see this text in chat:</p><p><img alt="Demo of the command result" src="/comfyai_docs_build/assets/images/Screenshot_20220112_133714-e841b8110a7c439b695ec607dedd4be3.png" class="fullscreen-image__source"></p><p>Now that&#x27;s setup, every time a user that rejoins your server after having already been in it, they will automatically be reassigned the roles and nickname they had upon leaving!</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="additional-info">Additional Info<a class="hash-link" href="#additional-info" title="Direct link to heading">​</a></h3><p>An “Event Listener” is a special high performance function that runs inside ComfyAI’s servers. Each time any event happens on your server like: a message being sent, a user joining, roles being updated, emoji reactions, etc, a small snippet of information is sent by Discord to Comfy over what is called a “Gateway”. ComfyAI scans this data and checks if it matches any automations server owners have created. If a match is found the corresponding action is performed.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-01-12T21:13:51.000Z">1/12/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/comfyai_docs_build/guides/welcome"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Welcome to Guides</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#automatically-reassigning-roles-with-comfyai" class="table-of-contents__link toc-highlight">Automatically reassigning roles with ComfyAI</a></li><li><a href="#additional-info" class="table-of-contents__link toc-highlight">Additional Info</a></li></ul></div></div></div></div></main></div></div><footer class="footer padding--none"><div class="container"><div class="row footer__links padding-vert--xl"><div class="col footer__col"><h4 class="footer__title">GET STARTED</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/comfyai_docs_build/basic-commands/basic">Adding the bot</a></li><li class="footer__item"><a class="footer__link-item" href="/comfyai_docs_build/basic-commands">Basic Usage</a></li><li class="footer__item"><a class="footer__link-item" href="/comfyai_docs_build/basic-commands">Advanced Usage</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">COMMANDS</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/comfyai_docs_build/ai_tuning">All Commands</a></li><li class="footer__item"><a class="footer__link-item" href="/comfyai_docs_build/ai_tuning/the-community/discord">When Listeners</a></li><li class="footer__item"><a class="footer__link-item" href="/comfyai_docs_build/ai_tuning/the-community/discord">Comfy Relay</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">GUIDES</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/comfyai_docs_build/guides/welcome">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/comfyai_docs_build/guides/fundamentals/cryptography">Growing your server</a></li><li class="footer__item"><a class="footer__link-item" href="/comfyai_docs_build/guides/fundamentals/cryptography">Managing your Server</a></li><li class="footer__item"><a class="footer__link-item" href="/comfyai_docs_build/guides/tutorials/twitch">Tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">COMMUNITY</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/JA25wHBxP3" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/comfyai" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.reddit.com/r/comfyai/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subreddit</a></li></ul></div></div><div class="footer__bottom padding-bottom--xl"><div><a href="https://cybermancy.org/comfyai" target="_blank" rel="noopener noreferrer"><img src="/comfyai_docs_build/img/logo.png" alt="ComfyAI Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/comfyai_docs_build/img/logo.png" alt="ComfyAI Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">© 2022 Cybermancy Computer Research.</div></div></div><div class="social"></div></footer></div>
<script src="/comfyai_docs_build/assets/js/runtime~main.93cd3a35.js"></script>
<script src="/comfyai_docs_build/assets/js/main.0c946e6e.js"></script>
</body>
</html>